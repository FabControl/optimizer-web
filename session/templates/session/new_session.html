{% extends "session/base.html" %}
{% load i18n %}

{% block content %}
{% load crispy_forms_tags %}

<div class="container pt-3">
  <div class="row">
    <div class="col-sm">
      <p class="lead">
        <font size="6">{% trans 'New Testing Session' %}</font>
      </p>
    </div>
  </div>
  <form action="" method="post">
    {% csrf_token %}
    <div class="row">
      <div class="col-sm-6">
        {{ form|crispy }}
      </div>
    </div>
    <div class="row pt-3">
      <div class="col-sm-4">
        <button type="submit" class="btn btn-primary">{% trans 'Start Testing Session' %}</button>
      </div>
    </div>
  </form>

</div>

{% endblock %}
{% block javascript %}
  <script type = "text/javascript">
    <!--
    $("#id_name").focusout(function(){
      $.ajax({
        method: "PATCH",
        headers: {
          "X-CSRFToken": $("input[name=csrfmiddlewaretoken]").val()},
        data: $("#id_name").val()});
    });
    //-->
  </script>
  <script type = "text/javascript">
    <!--
    if ($('#id_buildplate_choices').val() == "Other")
    {
      $('#div_id_buildplate').slideDown(0);
      $('#id_buildplate').val('');
    } else {
      $('#div_id_buildplate').slideUp(0);
      $('#id_buildplate').val($('#id_buildplate_choices').val());
    }

    $('#id_buildplate_choices').bind('change', function(){
      if (event.target.value == "Other")
      {
        $('#div_id_buildplate').slideDown();
        $('#id_buildplate').val('');
      } else {
        $('#div_id_buildplate').slideUp();
        $('#id_buildplate').val(event.target.value);
      }
    });
    //-->
  </script>
  {% endblock %}
