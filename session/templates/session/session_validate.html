{% load crispy_forms_tags %}
{% load i18n %}
{% if request.path in request.META.HTTP_REFERER %}<iframe width="1" height="1" frameborder="0" src="{% url 'gcode' object.pk %}"></iframe>{% endif %}
<div class="row pt-2">
  <div class="col">
    {% url 'gcode' object.pk as gcode_link %}
    <p>{% blocktrans %}<b>Print the downloaded test file</b><br>If the test gcode didn't download, you can get it <a href="{{ gcode_link }}">here</a>.{% endblocktrans %}</p>
  </div>
</div>
<div class="row">
  <div class="col-sm">
    <p><b>{% trans 'Inspect the printed test structure' %}</b></p>
  </div>
</div>
<div class="row">
  <div class="col-sm">
    {% if object.test_info.hint_valid %}
    <span>{{ object.test_info.hint_valid|safe }}</span>
    {% endif %}
  </div>
</div>
<br>
<p><b>{% trans 'Select the best parameter combination' %}</b></p>
<form class="" action="" method="POST">
  <div class="pt-3">
    <div>
      {% crispy form %}
    </div>
  </div>
  <div class="row pt-2">
    <div class="col">
      <button class="btn btn-secondary" onclick="location.href='{% url 'session_validate_back' object.pk %}'" type="button" name="button">{% trans 'Back' %}</button>
    </div>
    <div class="col text-right">
      <button type="submit" name="btnprimary" class="btn btn-primary">{% trans 'Next Test' %}</button>
    </div>
  </div>
</form>
