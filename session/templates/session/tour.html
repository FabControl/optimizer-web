{% block content %}
{% spaceless %}
{% if object.test_number == "01" %}
<script src="https://cdn.jsdelivr.net/npm/shepherd.js@5.0.1/dist/js/shepherd.js"></script>
<script type="text/javascript">
const tour = new Shepherd.Tour({
  useModalOverlay: true,
  defaultStepOptions: {
    cancelIcon: {
      enabled: true
    },
    classes: 'class-1 class-2',
    scrollTo: { behavior: 'smooth', block: 'center' }
  }
});

tour.addStep({
  id: 'welcome',
  title: 'Welcome to your first testing session!',
  text: 'Here you can progress through a series of tests during which you will discover which settings are <b>most optimal</b> for your printer and material combination.',
  classes: 'example-step-extra-class',
  buttons: [
    {
      text: 'Next',
      action: tour.next
    }
  ]
});

tour.addStep({
  id: 'test_selector',
  title: 'Test switch panel',
  text: 'Here you can see and change parameters to be tested.',
  canClickTarget: false,
  attachTo: {
    element: '#test_selector',
    on: 'right'
  },
  classes: 'example-step-extra-class',
  buttons: [
    {
      action() {
        return this.back();
      },
      classes: 'shepherd-button-secondary',
      text: 'Back'
    },
    {
      text: 'Next',
      action: tour.next
    }
  ]
});

tour.addStep({
  id: 'shep_min_max_parameter_one',
  title: 'Parameter interval selector',
  text: 'You can specify the range of values to be tested here:',
  attachTo: {
    element: '#div_id_min_max_parameter_one',
    on: 'bottom'
  },
  classes: 'example-step-extra-class',
  buttons: [
    {
      action() {
        return this.back();
      },
      classes: 'shepherd-button-secondary',
      text: 'Back'
    },
    {
      text: 'Next',
      action: tour.next
    }
  ]
});

tour.addStep({
  id: 'shep_min_max_parameter_one',
  title: 'Parameter interval selector',
  text: 'This is an accessory parameter. It is required to successfully print the test structure but it is not tested during this test.',
  attachTo: {
    element: '#div_id_temperature_printbed_setpoint',
    on: 'bottom'
  },
  classes: 'example-step-extra-class',
  buttons: [
    {
      action() {
        return this.back();
      },
      classes: 'shepherd-button-secondary',
      text: 'Back'
    },
    {
      text: 'Next',
      action: tour.next
    }
  ]
});

tour.addStep({
  id: 'shep_min_max_parameter_one',
  title: 'Parameter interval selector',
  text: 'If a parameter has already been tested or is locked for this type of test, it will be greyed out.',
  attachTo: {
    element: '#div_id_part_cooling_setpoint',
    on: 'top'
  },
  classes: 'example-step-extra-class',
  buttons: [
    {
      action() {
        return this.back();
      },
      classes: 'shepherd-button-secondary',
      text: 'Back'
    },
    {
      text: 'Next',
      action: tour.next
    }
  ]
});

tour.addStep({
  text: `Once you have filled the required fields, press "Generate G-Code" to continue!`,
  canClickTarget: false,
  buttons: [
    {
      action() {
        return this.back();
      },
      classes: 'shepherd-button-secondary',
      text: 'Back'
    },
    {
      action() {
        return this.next();
      },
      text: 'Next'
    }
  ],
});

tour.start();
</script>
{% elif object.test_number == "03" %}
<script src="https://cdn.jsdelivr.net/npm/shepherd.js@5.0.1/dist/js/shepherd.js"></script>
<script type="text/javascript">
const tour = new Shepherd.Tour({
  useModalOverlay: true,
  defaultStepOptions: {
    cancelIcon: {
      enabled: true
    },
    classes: 'class-1 class-2',
    scrollTo: { behavior: 'smooth', block: 'center' }
  }
});

tour.addStep({

  title: 'Test switch panel',
  text: 'You can now see that the previous test has been completed.',
  canClickTarget: false,
  attachTo: {
    element: '#test_selector',
    on: 'right'
  },
  classes: 'example-step-extra-class',
  buttons: [
    {
      text: 'Next',
      action: tour.next
    }
  ]
});

tour.addStep({
  title: 'Parameter interval selector',
  text: 'You can see information about previous tests, generate a test report and slicing configuration here in the overview.',
  attachTo: {
    element: '#overview',
    on: 'bottom'
  },
  classes: 'example-step-extra-class',
  buttons: [
    {
      action() {
        return this.back();
      },
      classes: 'shepherd-button-secondary',
      text: 'Back'
    },
    {
      text: 'Next',
      action: tour.next
    }
  ]
});

tour.addStep({
  text: 'This concludes the introduction. If you have any further questions, do not hesitate to consult our "Help" section, found at the top of the page!',

  classes: 'example-step-extra-class',
  buttons: [
    {
      action() {
        return this.back();
      },
      classes: 'shepherd-button-secondary',
      text: 'Back'
    },
    {
      text: 'Finish',
      action: function(){window.location.replace("{% url 'disable_onboarding' %}?next={{ request.path }}");}
    }
  ]
});


tour.start();
</script>
{% endif %}
{% endspaceless %}
{% endblock %}
